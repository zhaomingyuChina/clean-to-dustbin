# Clean to Dustbin Mod

一个用于Minecraft Forge 1.20.1的服务端mod，能够定时清理全世界掉落物并将其保存在可访问的垃圾桶中。

## 功能特点

### 🗑️ 智能垃圾桶系统
- 自动收集并保存全世界掉落物
- 6行大箱子界面，支持多页翻页
- 红色玻璃板翻页按钮，操作直观
- 实时显示当前页码
- 第一页不显示上一页按钮，最后一页不显示下一页按钮

### ⏰ 定时清理机制
- 可配置的清理周期
- 清理前12次提醒广播：
  - 1分钟提醒
  - 30秒提醒
  - 10秒到1秒倒计时提醒
- 清理后广播收集的掉落物数量

### 📝 高度可配置
- 自定义提醒文字
- 调整清扫周期
- 设置垃圾桶页数
- 灵活的配置选项

### 🎮 便捷的命令系统
- `/ljt` - 打开垃圾桶界面
- `/ljt <页码>` - 直接跳转到指定页码
- `/ljt reload` - 重新加载配置（需要管理员权限）

## 安装说明

1. 确保你的服务器已安装 **Forge 1.20.1**
2. 下载 `clean-to-dustbin-x.x.x.jar` 文件
3. 将jar文件放入服务器的 `mods` 文件夹
4. 启动服务器，mod会自动生成配置文件
5. 根据需要修改配置文件

## 使用方法

### 打开垃圾桶
- 在游戏中输入 `/ljt` 命令
- 垃圾桶界面会以6行大箱子的形式打开

### 翻页操作
- **上一页**：点击左下角的红色玻璃板（第6行第3格）
- **当前页码**：中间的告示牌显示当前页码和总页数
- **下一页**：点击右下角的红色玻璃板（第6行第5格）

### 直接跳转
- 输入 `/ljt <页码>` 可直接跳转到指定页码
- 例如：`/ljt 3` 跳转到第3页

## 配置选项

配置文件位于 `serverconfig/cleantodustbin-server.toml`，可通过以下选项自定义mod行为：

| 选项 | 类型 | 默认值 | 描述 |
|------|------|--------|------|
| `CLEANUP_INTERVAL` | 整数 | 3600 | 清理周期（秒） |
| `DUSTBIN_PAGES` | 整数 | 5 | 垃圾桶页数 |
| `REMINDER_MESSAGES` | 字符串列表 | 内置消息 | 清理前的提醒消息 |

### 自定义提醒消息示例
```toml
REMINDER_MESSAGES = [
    "&a掉落物清理将在 1 分钟后开始！",
    "&a掉落物清理将在 30 秒后开始！",
    "&a掉落物清理将在 10 秒后开始！",
    "&a掉落物清理将在 9 秒后开始！",
    "&a掉落物清理将在 8 秒后开始！",
    "&a掉落物清理将在 7 秒后开始！",
    "&a掉落物清理将在 6 秒后开始！",
    "&a掉落物清理将在 5 秒后开始！",
    "&a掉落物清理将在 4 秒后开始！",
    "&a掉落物清理将在 3 秒后开始！",
    "&a掉落物清理将在 2 秒后开始！",
    "&a掉落物清理将在 1 秒后开始！"
]
```

## 命令说明

| 命令 | 权限 | 描述 |
|------|------|------|
| `/ljt` | 所有玩家 | 打开垃圾桶界面 |
| `/ljt <页码>` | 所有玩家 | 直接跳转到指定页码 |
| `/ljt reload` | 管理员 | 重新加载配置文件 |

## 界面说明

### 垃圾桶界面布局
```
┌─────────────────────────────────────────────────┐
│                                                 │
│                                                 │
│                                                 │
│                                                 │
│                                                 │
│                                                 │
│  [红玻璃]  [告示牌]  [红玻璃]                   │
│  [上一页]  [页码]    [下一页]                   │
└─────────────────────────────────────────────────┘
```

- **红玻璃按钮**：点击切换页面
- **告示牌**：显示当前页码和总页数
- **物品槽**：存放收集的掉落物

## 开发信息

### 技术栈
- **Minecraft Forge**：1.20.1
- **Java**：17
- **Gradle**：8.8

### 项目结构
```
clean-to-dustbin/
├── src/main/java/com/example/cleantodustbin/
│   ├── CleanToDustbin.java          # 主mod类
│   ├── config/ModConfig.java        # 配置类
│   ├── command/DustbinCommand.java  # 命令处理
│   ├── cleanup/CleanupScheduler.java # 清理调度器
│   └── dustbin/                     # 垃圾桶相关
│       ├── DustbinManager.java      # 垃圾桶管理
│       ├── DustbinInventory.java    # 垃圾桶库存
│       └── DustbinContainer.java    # 垃圾桶容器
└── build.gradle                     # Gradle配置
```

## 注意事项

1. 本mod仅在服务端运行，客户端无需安装
2. 确保服务器有足够的内存来存储垃圾桶数据
3. 定期清理垃圾桶，避免内存占用过大
4. 修改配置后需要使用 `/ljt reload` 命令重新加载

## 许可证

MIT License

## 支持

如有问题或建议，欢迎提交Issue或Pull Request。

---

**享受整洁的Minecraft世界！** 🎉